(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[883],{5122:function(e,t,a){Promise.resolve().then(a.bind(a,5009))},5009:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var r=a(7437),s=a(2265),l=a(29),n=a.n(l),o=a(2520),i=a.n(o);a(4982),i().accessToken="pk.eyJ1IjoidHVya2luYWxnaGFtZGkiLCJhIjoiY205dWN3YngyMDc0YTJqc2dxY3d3OXFmcSJ9.qKG6lsUkWWl3nxbAQzAqhg";let d=[39.826174,21.422487],c=[{id:1,location_name:"Masjid al-Haram",coordinates:{lng:39.826174,lat:21.422487},density_level:"high",updated_at:new Date().toISOString()},{id:2,location_name:"Mina",coordinates:{lng:39.892966,lat:21.413249},density_level:"medium",updated_at:new Date().toISOString()},{id:3,location_name:"Jamaraat Bridge",coordinates:{lng:39.873485,lat:21.42365},density_level:"critical",updated_at:new Date().toISOString()},{id:4,location_name:"Arafat",coordinates:{lng:39.984687,lat:21.355461},density_level:"low",updated_at:new Date().toISOString()},{id:5,location_name:"Muzdalifah",coordinates:{lng:39.936322,lat:21.383082},density_level:"medium",updated_at:new Date().toISOString()},{id:6,location_name:"Mina Entrance Gate 1",coordinates:{lng:39.887235,lat:21.411856},density_level:"high",updated_at:new Date().toISOString()},{id:7,location_name:"Tent City Section A",coordinates:{lng:39.889124,lat:21.414501},density_level:"medium",updated_at:new Date().toISOString()},{id:8,location_name:"Jamarat Central Access",coordinates:{lng:39.871952,lat:21.42385},density_level:"critical",updated_at:new Date().toISOString()}],m=[{name:"Masjid al-Haram",coordinates:[39.826174,21.422487]},{name:"Mina",coordinates:[39.892966,21.413249]},{name:"Jamaraat Bridge",coordinates:[39.873485,21.42365]},{name:"Arafat",coordinates:[39.984687,21.355461]},{name:"Muzdalifah",coordinates:[39.936322,21.383082]}];function x(e){let{crowdData:t=[]}=e,a=(0,s.useRef)(null),l=(0,s.useRef)(null),o=(0,s.useRef)([]),[x,h]=(0,s.useState)("streets"),[p,u]=(0,s.useState)(!1),g=t.length>0?t:c,b=e=>{if(!l.current)return;let t="mapbox://styles/mapbox/streets-v11";"satellite"===e&&(t="mapbox://styles/mapbox/satellite-streets-v11"),"light"===e&&(t="mapbox://styles/mapbox/light-v10"),l.current.setStyle(t),h(e)};return(0,s.useEffect)(()=>{if(a.current&&!l.current)return l.current=new(i()).Map({container:a.current,style:"mapbox://styles/mapbox/streets-v11",center:d,zoom:13,pitch:40,bearing:-30}),l.current.addControl(new(i()).NavigationControl,"top-right"),l.current.addControl(new(i()).FullscreenControl,"top-right"),l.current.addControl(new(i()).GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),"top-right"),l.current.on("load",()=>{l.current&&!l.current.getLayer("3d-buildings")&&(l.current.getSource("composite")||l.current.addSource("composite",{type:"vector",url:"mapbox://mapbox.mapbox-streets-v8"}),l.current.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:14,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],14,0,16,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],14,0,16,["get","min_height"]],"fill-extrusion-opacity":.6}}))}),()=>{l.current&&(l.current.remove(),l.current=null)}},[]),(0,s.useEffect)(()=>{if(l.current&&l.current.loaded()){if(p){if(!l.current.getSource("crowd-density")){let e=g.map(e=>({type:"Feature",properties:{density:"low"===e.density_level?1:"medium"===e.density_level?2:"high"===e.density_level?3:4},geometry:{type:"Point",coordinates:[e.coordinates.lng,e.coordinates.lat]}}));l.current.addSource("crowd-density",{type:"geojson",data:{type:"FeatureCollection",features:e}}),l.current.addLayer({id:"crowd-heatmap",type:"heatmap",source:"crowd-density",paint:{"heatmap-weight":["get","density"],"heatmap-intensity":.8,"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(33,102,172,0)",.2,"rgb(103,169,207)",.4,"rgb(209,229,240)",.6,"rgb(253,219,199)",.8,"rgb(239,138,98)",1,"rgb(178,24,43)"],"heatmap-radius":30,"heatmap-opacity":.7}})}}else l.current.getLayer("crowd-heatmap")&&l.current.removeLayer("crowd-heatmap"),l.current.getSource("crowd-density")&&l.current.removeSource("crowd-density")}},[p,g]),(0,s.useEffect)(()=>{l.current&&l.current.loaded()&&(o.current.forEach(e=>e.remove()),o.current=[],p||g.forEach(e=>{var t,a;let r="#10B981";"medium"===e.density_level&&(r="#F59E0B"),"high"===e.density_level&&(r="#F97316"),"critical"===e.density_level&&(r="#EF4444");let s=document.createElement("div");s.className="marker animate-pulse",s.style.backgroundColor=r,s.style.width="28px",s.style.height="28px",s.style.borderRadius="50%",s.style.border="3px solid white",s.style.boxShadow="0 0 0 2px rgba(0,0,0,0.1), 0 0 8px rgba(0,0,0,0.15)",s.style.cursor="pointer",s.style.transition="all 0.3s ease","critical"===e.density_level&&(s.style.animation="pulse 1.5s infinite");let n=new(i()).Popup({offset:25,closeButton:!1,className:"custom-popup"}).setHTML('\n          <div class="p-3">\n            <h3 class="font-semibold text-slate-800 mb-1">'.concat(e.location_name,'</h3>\n            <div class="').concat("critical"===e.density_level?"text-danger":"high"===e.density_level?"text-orange-500":"medium"===e.density_level?"text-warning":"text-green-500",' mb-2 font-medium text-sm flex items-center">\n              <span class="w-2 h-2 rounded-full ').concat("critical"===e.density_level?"bg-danger":"high"===e.density_level?"bg-orange-500":"medium"===e.density_level?"bg-warning":"bg-green-500",' mr-1"></span>\n              ').concat(e.density_level.charAt(0).toUpperCase()+e.density_level.slice(1)," Density\n            </div>\n            ").concat(e.meta_data?'\n              <div class="grid grid-cols-2 gap-2 border-t border-slate-100 dark:border-slate-700 pt-2 mt-1 text-xs text-slate-500">\n                <div>\n                  <span class="font-medium">Crowd Size:</span>\n                  <span>'.concat((null===(t=e.crowd_size)||void 0===t?void 0:t.toLocaleString())||"N/A",'</span>\n                </div>\n                <div>\n                  <span class="font-medium">Occupancy:</span>\n                  <span>').concat(e.occupancy_percentage||"N/A",'%</span>\n                </div>\n                <div>\n                  <span class="font-medium">Density:</span>\n                  <span>').concat(e.meta_data.density||"N/A",' p/m\xb2</span>\n                </div>\n                <div>\n                  <span class="font-medium">Capacity:</span>\n                  <span>').concat((null===(a=e.meta_data.capacity)||void 0===a?void 0:a.toLocaleString())||"N/A","</span>\n                </div>\n              </div>\n              ").concat(e.meta_data.sections&&e.meta_data.sections.length>0?'\n                <div class="mt-2 border-t border-slate-100 dark:border-slate-700 pt-2">\n                  <div class="text-xs font-medium text-slate-700 mb-1">Section Details:</div>\n                  <div class="max-h-28 overflow-y-auto text-xs">\n                    '.concat(e.meta_data.sections.map(e=>'\n                      <div class="flex justify-between items-center mb-1 last:mb-0">\n                        <span>'.concat(e.name,':</span>\n                        <span class="').concat("critical"===e.density_level?"text-danger":"high"===e.density_level?"text-orange-500":"medium"===e.density_level?"text-warning":"text-green-500",' font-medium">').concat(e.density_level.charAt(0).toUpperCase()+e.density_level.slice(1),"</span>\n                      </div>\n                    ")).join(""),"\n                  </div>\n                </div>\n              "):"","\n            "):"",'\n            <p class="text-xs text-slate-500 mt-2">\n              Updated: ').concat(new Date(e.updated_at).toLocaleTimeString(),"\n            </p>\n          </div>\n        ")),d=new(i()).Marker(s).setLngLat([e.coordinates.lng,e.coordinates.lat]).setPopup(n).addTo(l.current);o.current.push(d)}))},[g,p]),(0,r.jsxs)("div",{className:"jsx-ac2de18584837723 relative w-full h-full",children:[(0,r.jsx)("div",{ref:a,className:"jsx-ac2de18584837723 w-full h-full rounded-lg overflow-hidden"}),(0,r.jsxs)("div",{className:"jsx-ac2de18584837723 absolute top-4 left-4 z-10 flex flex-col space-y-3",children:[(0,r.jsx)("div",{className:"jsx-ac2de18584837723 bg-white dark:bg-gray-800 shadow-lg rounded-md overflow-hidden w-56",children:(0,r.jsxs)("select",{onChange:e=>{let t=e.target.value;if(!l.current||""===t)return;let a=m.find(e=>e.name===t);a&&l.current.flyTo({center:a.coordinates,zoom:15,essential:!0,duration:1500})},defaultValue:"",className:"jsx-ac2de18584837723 w-full p-2 border-0 bg-transparent text-slate-700 dark:text-slate-200 text-sm",children:[(0,r.jsx)("option",{value:"",className:"jsx-ac2de18584837723",children:"Jump to location..."}),m.map(e=>(0,r.jsx)("option",{value:e.name,className:"jsx-ac2de18584837723",children:e.name},e.name))]})}),(0,r.jsxs)("div",{className:"jsx-ac2de18584837723 bg-white dark:bg-gray-800 shadow-lg rounded-md p-2 flex space-x-1",children:[(0,r.jsx)("button",{onClick:()=>b("streets"),className:"jsx-ac2de18584837723 "+"px-2 py-1 text-xs rounded ".concat("streets"===x?"bg-primary text-white":"bg-gray-100 dark:bg-gray-700 text-slate-700 dark:text-slate-200"),children:"Streets"}),(0,r.jsx)("button",{onClick:()=>b("satellite"),className:"jsx-ac2de18584837723 "+"px-2 py-1 text-xs rounded ".concat("satellite"===x?"bg-primary text-white":"bg-gray-100 dark:bg-gray-700 text-slate-700 dark:text-slate-200"),children:"Satellite"}),(0,r.jsx)("button",{onClick:()=>b("light"),className:"jsx-ac2de18584837723 "+"px-2 py-1 text-xs rounded ".concat("light"===x?"bg-primary text-white":"bg-gray-100 dark:bg-gray-700 text-slate-700 dark:text-slate-200"),children:"Light"})]}),(0,r.jsx)("div",{className:"jsx-ac2de18584837723 bg-white dark:bg-gray-800 shadow-lg rounded-md p-2",children:(0,r.jsxs)("label",{className:"jsx-ac2de18584837723 flex items-center cursor-pointer",children:[(0,r.jsxs)("div",{className:"jsx-ac2de18584837723 relative",children:[(0,r.jsx)("input",{type:"checkbox",checked:p,onChange:()=>u(!p),className:"jsx-ac2de18584837723 sr-only"}),(0,r.jsx)("div",{className:"jsx-ac2de18584837723 block bg-gray-200 dark:bg-gray-700 w-10 h-6 rounded-full"}),(0,r.jsx)("div",{className:"jsx-ac2de18584837723 "+"dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition ".concat(p?"transform translate-x-full bg-primary":"")})]}),(0,r.jsx)("div",{className:"jsx-ac2de18584837723 ml-3 text-xs text-slate-700 dark:text-slate-200",children:"Heatmap View"})]})})]}),(0,r.jsx)(n(),{id:"ac2de18584837723",children:"@-webkit-keyframes pulse{0%{-webkit-box-shadow:0 0 0 0 rgba(239,68,68,.7);box-shadow:0 0 0 0 rgba(239,68,68,.7)}70%{-webkit-box-shadow:0 0 0 15px rgba(239,68,68,0);box-shadow:0 0 0 15px rgba(239,68,68,0)}100%{-webkit-box-shadow:0 0 0 0 rgba(239,68,68,0);box-shadow:0 0 0 0 rgba(239,68,68,0)}}@-moz-keyframes pulse{0%{-moz-box-shadow:0 0 0 0 rgba(239,68,68,.7);box-shadow:0 0 0 0 rgba(239,68,68,.7)}70%{-moz-box-shadow:0 0 0 15px rgba(239,68,68,0);box-shadow:0 0 0 15px rgba(239,68,68,0)}100%{-moz-box-shadow:0 0 0 0 rgba(239,68,68,0);box-shadow:0 0 0 0 rgba(239,68,68,0)}}@-o-keyframes pulse{0%{box-shadow:0 0 0 0 rgba(239,68,68,.7)}70%{box-shadow:0 0 0 15px rgba(239,68,68,0)}100%{box-shadow:0 0 0 0 rgba(239,68,68,0)}}@keyframes pulse{0%{-webkit-box-shadow:0 0 0 0 rgba(239,68,68,.7);-moz-box-shadow:0 0 0 0 rgba(239,68,68,.7);box-shadow:0 0 0 0 rgba(239,68,68,.7)}70%{-webkit-box-shadow:0 0 0 15px rgba(239,68,68,0);-moz-box-shadow:0 0 0 15px rgba(239,68,68,0);box-shadow:0 0 0 15px rgba(239,68,68,0)}100%{-webkit-box-shadow:0 0 0 0 rgba(239,68,68,0);-moz-box-shadow:0 0 0 0 rgba(239,68,68,0);box-shadow:0 0 0 0 rgba(239,68,68,0)}}.custom-popup .mapboxgl-popup-content{-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:0;-webkit-box-shadow:0 4px 15px rgba(0,0,0,.1);-moz-box-shadow:0 4px 15px rgba(0,0,0,.1);box-shadow:0 4px 15px rgba(0,0,0,.1);border:1px solid#e2e8f0}.custom-popup .mapboxgl-popup-tip{border-top-color:white!important;border-bottom-color:white!important}.dark .custom-popup .mapboxgl-popup-content{background-color:#1e293b;color:#f1f5f9;border-color:#334155}.dark .custom-popup .mapboxgl-popup-tip{border-top-color:#1e293b!important;border-bottom-color:#1e293b!important}"})]})}var h=a(3768);function p(){let[e,t]=(0,s.useState)([]),[a,l]=(0,s.useState)(!0),[n,o]=(0,s.useState)(null),[i,d]=(0,s.useState)(new Date),[c,m]=(0,s.useState)({totalPilgrims:0,criticalAreas:[],highAreas:[],avgOccupancy:"0"}),p=e=>{if(!e||0===e.length)return;let t=0,a=0,r=[],s=[];e.forEach(e=>{e.crowd_size&&(t+=e.crowd_size),e.occupancy_percentage&&(a+=parseFloat(e.occupancy_percentage)),"critical"===e.density_level?r.push(e.location_name):"high"===e.density_level&&s.push(e.location_name)});let l=(a/e.length).toFixed(1);m({totalPilgrims:t,criticalAreas:r,highAreas:s,avgOccupancy:l})},u=async()=>{l(!0);try{let e=await fetch("/api/crowd-density");if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to fetch crowd density data")}let a=await e.json();a&&a.length>0?(t(a),p(a),o(null)):(t([]),o("No crowd density data available from API. Using mock data."))}catch(e){console.error("Failed to load crowd density:",e),t([]),o("Error fetching crowd data (".concat(e.message||"API error","). Using mock data."))}finally{l(!1),d(new Date)}};(0,s.useEffect)(()=>{u();let e=setInterval(()=>{u()},3e4);return()=>{clearInterval(e)}},[]);let g=async()=>{l(!0),await u()},b=async()=>{l(!0);try{let e=await fetch("/api/crowd-density",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recalculate:!0})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to recalculate crowd density")}await u()}catch(e){console.error("Failed to recalculate crowd density:",e),o("Error recalculating crowd data (".concat(e.message||"API error",")")),l(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col bg-slate-50 dark:bg-gray-900",children:[(0,r.jsx)(h.Z,{}),(0,r.jsx)("main",{className:"flex-grow p-4 md:p-6",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 mb-2",children:"Real-time Crowd Density Map"}),(0,r.jsx)("p",{className:"text-slate-600 dark:text-slate-400 md:max-w-2xl",children:"Monitor crowd density across Hajj sites to avoid congested areas and plan your journey safely."})]}),(0,r.jsxs)("div",{className:"mt-4 md:mt-0 flex items-center space-x-2",children:[(0,r.jsxs)("button",{className:"btn btn-outline flex items-center",onClick:g,disabled:a,children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 ".concat(a?"animate-spin":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),a?"Refreshing...":"Refresh"]}),(0,r.jsxs)("button",{className:"btn btn-primary flex items-center",onClick:b,disabled:a,children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Recalculate"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"card p-4 border-l-4 border-primary",children:[(0,r.jsx)("div",{className:"text-sm text-slate-500 mb-1",children:"Total Pilgrims"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:c.totalPilgrims.toLocaleString()})]}),(0,r.jsxs)("div",{className:"card p-4 border-l-4 border-red-500",children:[(0,r.jsx)("div",{className:"text-sm text-slate-500 mb-1",children:"Critical Areas"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:c.criticalAreas.length}),(0,r.jsx)("div",{className:"text-xs text-slate-500 truncate",children:c.criticalAreas.length>0?c.criticalAreas.join(", "):"No critical areas"})]}),(0,r.jsxs)("div",{className:"card p-4 border-l-4 border-orange-500",children:[(0,r.jsx)("div",{className:"text-sm text-slate-500 mb-1",children:"High Density Areas"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:c.highAreas.length}),(0,r.jsx)("div",{className:"text-xs text-slate-500 truncate",children:c.highAreas.length>0?c.highAreas.join(", "):"No high density areas"})]}),(0,r.jsxs)("div",{className:"card p-4 border-l-4 border-secondary",children:[(0,r.jsx)("div",{className:"text-sm text-slate-500 mb-1",children:"Avg. Occupancy"}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:[c.avgOccupancy,"%"]})]})]}),n&&(0,r.jsxs)("div",{className:"alert alert-warning mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-warning",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,r.jsx)("p",{className:"text-slate-700 dark:text-slate-200",children:n})]}),(0,r.jsx)("p",{className:"text-xs mt-2 text-slate-500 dark:text-slate-400 ml-7",children:"Note: In production, this would connect to a real Supabase database with service role key."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-5",children:[(0,r.jsxs)("div",{className:"card flex items-center p-3 border-l-4 border-green-500",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full bg-green-500 mr-2 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-slate-700 dark:text-slate-200 text-sm",children:"Low Density"})]}),(0,r.jsxs)("div",{className:"card flex items-center p-3 border-l-4 border-yellow-500",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full bg-yellow-500 mr-2 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-slate-700 dark:text-slate-200 text-sm",children:"Medium Density"})]}),(0,r.jsxs)("div",{className:"card flex items-center p-3 border-l-4 border-orange-500",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full bg-orange-500 mr-2 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-slate-700 dark:text-slate-200 text-sm",children:"High Density"})]}),(0,r.jsxs)("div",{className:"card flex items-center p-3 border-l-4 border-red-500",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full bg-red-500 mr-2 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-slate-700 dark:text-slate-200 text-sm",children:"Critical Density"})]})]}),(0,r.jsx)("div",{className:"card h-[70vh] relative border border-slate-200 dark:border-gray-700 rounded-lg shadow-lg overflow-hidden",children:a&&0===e.length?(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 dark:bg-gray-800/80 z-10",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary dark:border-primary-dark mb-3"}),(0,r.jsx)("p",{className:"text-slate-600 dark:text-slate-300",children:"Loading map data..."})]})}):(0,r.jsx)(x,{crowdData:e})}),(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Last updated: ",i.toLocaleTimeString()]}),(0,r.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Auto-updates every 30 seconds"]})]})]})})]})}},3768:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var r=a(7437),s=a(2265),l=a(7648),n=a(9376),o=a(5922);function i(){let e=(0,n.usePathname)(),{theme:t,setTheme:a}=(0,o.F)(),[i,d]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{d(!0)},[]),(0,r.jsx)("header",{className:"bg-white dark:bg-gray-800 border-b border-slate-200 dark:border-gray-700 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3 sm:px-6 flex justify-between items-center",children:[(0,r.jsxs)(l.default,{href:"/",className:"text-xl font-bold text-slate-800 dark:text-slate-200 flex items-center",children:[(0,r.jsx)("span",{className:"mr-2 text-primary dark:text-primary-dark",children:"\uD83D\uDD4B"}),(0,r.jsx)("span",{className:"bg-gradient-to-r from-primary to-primary/80 bg-clip-text text-transparent dark:from-primary-dark dark:to-primary-dark/80",children:"Tafweej Hajj"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"hidden md:flex space-x-1",children:[(0,r.jsx)(l.default,{href:"/map",className:"px-4 py-2 rounded-md transition-all duration-200 ".concat("/map"===e?"bg-primary/10 text-primary dark:bg-primary-dark/20 dark:text-primary-dark font-medium":"text-slate-600 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-gray-700"),children:"Map"}),(0,r.jsx)(l.default,{href:"/routes",className:"px-4 py-2 rounded-md transition-all duration-200 ".concat("/routes"===e?"bg-primary/10 text-primary dark:bg-primary-dark/20 dark:text-primary-dark font-medium":"text-slate-600 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-gray-700"),children:"Routes"}),(0,r.jsx)(l.default,{href:"/alerts",className:"px-4 py-2 rounded-md transition-all duration-200 ".concat("/alerts"===e?"bg-primary/10 text-primary dark:bg-primary-dark/20 dark:text-primary-dark font-medium":"text-slate-600 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-gray-700"),children:"Alerts"})]}),(0,r.jsx)("button",{"aria-label":"Toggle Dark Mode",type:"button",className:"w-10 h-10 p-2 rounded-full bg-slate-100 dark:bg-gray-700 flex items-center justify-center transition-all duration-300 hover:bg-slate-200 dark:hover:bg-gray-600 shadow-sm",onClick:()=>a("dark"===t?"light":"dark"),children:i&&(0,r.jsx)(r.Fragment,{children:"dark"===t?(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-700",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})})}),(0,r.jsx)("button",{className:"md:hidden rounded-md p-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-gray-700",onClick:()=>{alert("Mobile menu would open here. Not implemented in this prototype.")},children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]})})}}},function(e){e.O(0,[508,415,733,819,971,117,744],function(){return e(e.s=5122)}),_N_E=e.O()}]);